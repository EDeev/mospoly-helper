# –ú–æ—Å–ü–æ–ª–∏–•–µ–ª–ø–µ—Ä üéì

**–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –∫–∞–º–ø—É—Å–∞–º –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ü–æ–ª–∏—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞**

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://python.org)
[![Aiogram](https://img.shields.io/badge/Aiogram-3.0.0-green.svg)](https://aiogram.dev/)
[![MoviePy](https://img.shields.io/badge/MoviePy-1.0.3-red.svg)](https://moviepy.readthedocs.io/)
[![Bot](https://img.shields.io/badge/Telegram-@MosPoly__Helperbot-blue.svg)](https://t.me/MosPoly_Helperbot)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ—Å–ü–æ–ª–∏–•–µ–ª–ø–µ—Ä ‚Äî —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–∞–º–ø—É—Å–∞—Ö –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ü–æ–ª–∏—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞. –ë–æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–¥–µ–æ-–º–∞—Ä—à—Ä—É—Ç—ã –¥–æ –ª—é–±–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –≤ –ø—è—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞–º–ø—É—Å–∞—Ö —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞.

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–π –∂–∏–∑–Ω–∏.

### ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üó∫Ô∏è **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** –ø–æ 5 –∫–∞–º–ø—É—Å–∞–º –ú–æ—Å–ü–æ–ª–∏—Ç–µ—Ö–∞
- üé• **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤–∏–¥–µ–æ-–º–∞—Ä—à—Ä—É—Ç—ã** –æ—Ç –≤—Ö–æ–¥–∞ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é –∏–ª–∏ –æ—Ç –≤—Ö–æ–¥–∞ –≤ –∫–æ—Ä–ø—É—Å
- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–¥–∞—á–∞** –≥–æ—Ç–æ–≤—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–º—É –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—é
- üì± **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ inline-–∫–Ω–æ–ø–∫–∞–º–∏
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ** —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è Telegram (H.264, –±–∏—Ç—Ä–µ–π—Ç 1500k)
- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –º–µ–Ω–µ–µ 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- üìä **–£–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### üè¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–∞–º–ø—É—Å—ã

| –ö–∞–º–ø—É—Å | –ö–æ–¥ | –§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ –∫–∞–±–∏–Ω–µ—Ç–∞ | –ü—Ä–∏–º–µ—Ä |
|--------|-----|------------------------|---------|
| **–ë–æ–ª—å—à–∞—è –°–µ–º—ë–Ω–æ–≤—Å–∫–∞—è** | `bs` | [–∫–æ—Ä–ø—É—Å][—ç—Ç–∞–∂]-[–Ω–æ–º–µ—Ä] | `–∞1-01`, `–±2-15` |
| **–ü–∞–≤–ª–∞ –ö–æ—Ä—á–∞–≥–∏–Ω–∞** | `pk` | –ø–∫[–∫–æ—Ä–ø—É—Å][—ç—Ç–∞–∂][–Ω–æ–º–µ—Ä] | `–ø–∫1201`, `–ø–∫2315` |
| **–ü—Ä—è–Ω–∏—à–Ω–∏–∫–æ–≤–∞** | `pr` | –ø—Ä[–∫–æ—Ä–ø—É—Å][—ç—Ç–∞–∂][–Ω–æ–º–µ—Ä] | `–ø—Ä1101`, `–ø—Ä2208` |
| **–ú–∏—Ö–∞–ª–∫–æ–≤—Å–∫–∞—è** | `mi` | –º[–∫–æ—Ä–ø—É—Å][—ç—Ç–∞–∂][–Ω–æ–º–µ—Ä] | `–º1205`, `–º3110` |
| **–ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è** | `av` | –∞–≤[–∫–æ—Ä–ø—É—Å][—ç—Ç–∞–∂][–Ω–æ–º–µ—Ä] | `–∞–≤2301`, `–∞–≤1105` |

> üìù **–í–∞–∂–Ω–æ**: –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –Ω–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ —Ç–æ—á–Ω–æ –≤ —Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∫–∞–∫ –æ–Ω —É–∫–∞–∑–∞–Ω –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –∏–ª–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` ‚Äî –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `/help` ‚Äî –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- `/route` ‚Äî –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –¥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/start`
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `/route`
3. –£–∫–∞–∂–∏—Ç–µ –∫–∞–º–ø—É—Å –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
4. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ –≤ —Ç–æ—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–∞—Ä—à—Ä—É—Ç–∞ (–æ—Ç —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –æ—Ç –≤—Ö–æ–¥–∞ –≤ –∫–æ—Ä–ø—É—Å)
6. –ü–æ–ª—É—á–∏—Ç–µ –≤–∏–¥–µ–æ —Å –º–∞—Ä—à—Ä—É—Ç–æ–º

## üõ†Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|---------|------------|
| **Backend** | Python | 3.10+ | –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| **Bot Framework** | Aiogram | 3.0.0 | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å Telegram Bot API |
| **Video Processing** | MoviePy | 1.0.3 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –º–æ–Ω—Ç–∞–∂ –≤–∏–¥–µ–æ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ |
| **Video Encoding** | FFmpeg | latest | –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ |
| **Data Storage** | JSON | native | –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π |
| **State Management** | MemoryStorage | aiogram | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

### üèóÔ∏è –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/code/
‚îú‚îÄ‚îÄ bot.py            # üöÄ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py         # ‚öôÔ∏è  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
‚îú‚îÄ‚îÄ database.py       # üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ handlers.py       # üéõÔ∏è  –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ callback'–æ–≤
‚îú‚îÄ‚îÄ init.py           # üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ scripts.py        # üé¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îî‚îÄ‚îÄ combine.py        # üîÑ –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–µ—à–∞
```

**–ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **Single Responsibility** ‚Äî –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É
- **Dependency Injection** ‚Äî —Å–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **Async/Await** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Error Handling** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

```
üì¶ mospoly-helper/
‚îú‚îÄ‚îÄ üìÇ src/code/              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îú‚îÄ‚îÄ üìÇ data/                  # –†–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ cache/             # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ–º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ *-all.mp4      # –ü–æ–ª–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–æ—Ç —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ *-small.mp4    # –ö–æ—Ä–æ—Ç–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã (–æ—Ç –≤—Ö–æ–¥–∞ –≤ –∫–æ—Ä–ø—É—Å)
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ users/             # JSON-—Ñ–∞–π–ª—ã —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ {user_id}.json # –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ videos/            # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏—Å—Ö–æ–¥–Ω—ã—Ö –≤–∏–¥–µ–æ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ av/            # –ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ buildings/ # –í–∏–¥–µ–æ –æ—Ç –≤—Ö–æ–¥–∞ –¥–æ –∫–æ—Ä–ø—É—Å–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ floors/    # –í–∏–¥–µ–æ –ø–æ —ç—Ç–∞–∂–∞–º
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ offices/   # –í–∏–¥–µ–æ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ bs/            # –ë–æ–ª—å—à–∞—è –°–µ–º—ë–Ω–æ–≤—Å–∫–∞—è
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ mi/            # –ú–∏—Ö–∞–ª–∫–æ–≤—Å–∫–∞—è
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ pk/            # –ü–∞–≤–ª–∞ –ö–æ—Ä—á–∞–≥–∏–Ω–∞
‚îÇ       ‚îî‚îÄ‚îÄ üìÇ pr/            # –ü—Ä—è–Ω–∏—à–Ω–∏–∫–æ–≤–∞
‚îî‚îÄ‚îÄ üìÇ logs/                  # –ñ—É—Ä–Ω–∞–ª—ã —Ä–∞–±–æ—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```

## ‚ö° –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **OS**: Linux (Ubuntu 20.04+), macOS, Windows 10+
- **Python**: 3.10 –∏–ª–∏ –≤—ã—à–µ
- **RAM**: –º–∏–Ω–∏–º—É–º 2 –ì–ë (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4 –ì–ë)
- **Storage**: –º–∏–Ω–∏–º—É–º 10 –ì–ë –¥–ª—è –≤–∏–¥–µ–æ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∏ –∫–µ—à–∞
- **Network**: —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/EDeev/mospoly-helper.git
cd mospoly-helper
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
pip install -r requirements.txt
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ FFmpeg**

**Ubuntu/Debian:**
```bash
sudo apt update && sudo apt install ffmpeg
```

**macOS (—Å Homebrew):**
```bash
brew install ffmpeg
```

**Windows:**
–°–∫–∞—á–∞–π—Ç–µ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://ffmpeg.org/download.html) –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ PATH

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1. **–°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ [@BotFather](https://t.me/BotFather)
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
```python
# config.py
BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω
```

3. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–æ–≤**
```bash
mkdir -p data/{cache,users,videos/{av,bs,mi,pk,pr}/{buildings,floors,offices}}
mkdir -p logs
```

### üöÄ –ó–∞–ø—É—Å–∫

**–û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∂–∏–º:**
```bash
cd src/code
python bot.py
```

**–° –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
```bash
python bot.py 2>&1 | tee ../../logs/bot.log
```

**–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–µ—à–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```bash
python combine.py  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–µ—à –¥–ª—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
```

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### üé¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (scripts.py)
full_clip.write_videofile(
    filename,
    fps=30,                    # –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤
    codec="libx264",           # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–æ–¥–µ–∫ H.264
    bitrate="1500k",           # –ë–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä
    preset="fast",             # –ë—ã—Å—Ç—Ä–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
    ffmpeg_params=["-crf", "23"]  # Constant Rate Factor –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
)
```

**–ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÇÔ∏è **–£–¥–∞–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∏** ‚Äî —ç–∫–æ–Ω–æ–º–∏—è 30-40% —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
- ‚è© **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 2 —Ä–∞–∑–∞** ‚Äî —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- üìê **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ 400px** ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üóúÔ∏è **CRF 23** ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞

### ‚ö° –°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
1. **–ü–æ–ª–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã** (`*-all.mp4`) ‚Äî –æ—Ç –≤—Ö–æ–¥–∞ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é
2. **–ö–æ—Ä–æ—Ç–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã** (`*-small.mp4`) ‚Äî –æ—Ç –≤—Ö–æ–¥–∞ –≤ –∫–æ—Ä–ø—É—Å

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–µ—à–∞:**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
cache_path = f"../data/cache/{route_id}-{'all' if full_route else 'small'}.mp4"
if os.path.exists(cache_path):
    return cache_path  # –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–¥–∞—á–∞
else:
    return await make_full_clip(video_segments)  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ
```

### üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç | –ù–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç |
|---------|---------------------|---------------|
| **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞** | < 3 —Å–µ–∫—É–Ω–¥—ã | 15-30 —Å–µ–∫—É–Ω–¥ |
| **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** | 2-8 –ú–ë | –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ |
| **–ö–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ** | 400p, 30fps | –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ |
| **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU** | –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | –≤—ã—Å–æ–∫–∞—è |

## üß™ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|-----------|----------------|-------------------|-----------|
| **–†–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ** | 15-25 –ú–ë | 2-8 –ú–ë | üîª 70% |
| **–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** | 45-60 —Å–µ–∫ | 15-30 —Å–µ–∫ | üîª 50% |
| **–í—Ä–µ–º—è –æ—Ç–¥–∞—á–∏ (–∫–µ—à)** | N/A | < 3 —Å–µ–∫ | ‚ö° –º–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM** | 200-300 –ú–ë | 100-150 –ú–ë | üîª 40% |

## üì¶ combine.py ‚Äî –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–µ—à–∞

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ–º–∞—Ä—à—Ä—É—Ç–æ–≤:

```python
async def combine_all_videos():
    """
    –ú–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–µ—à–∞ –¥–ª—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
    
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
    - –í—Å–µ –∫–æ—Ä–ø—É—Å–∞: pr, pk, mi, av, bs
    - –ü–æ–ª–Ω—ã–µ –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
    - –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–∏–¥–µ–æ—Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
    """
    corpora = ["pr", "pk", "mi", "av", "bs"]
    
    for corpus in corpora:
        offices_path = f"../videos/{corpus}/offices"
        for video_file in os.listdir(offices_path):
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
            await make_full_clip([building_path, floor_path, office_path])
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞  
            await make_full_clip([floor_path, office_path])
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cd src/code
python combine.py  # –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤
```

## üë®‚Äçüíª –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –≥—Ä—É–ø–ø—ã **241-327** –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è "–°–∏—Å—Ç–µ–º–Ω–∞—è –∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è":

| –£—á–∞—Å—Ç–Ω–∏–∫ | –†–æ–ª—å | –í–∫–ª–∞–¥ | –ö–æ–Ω—Ç–∞–∫—Ç—ã |
|----------|------|-------|----------|
| **[–î–µ–µ–≤ –ï–≥–æ—Ä –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á](https://github.com/EDeev)** | Tech Lead & Backend Developer | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | [@EDeev](https://t.me/EDeev) |
| **[–°–∞–ø—Ä—ã–∫–∏–Ω –ü—ë—Ç—Ä –ò–≤–∞–Ω–æ–≤–∏—á](https://github.com/PetrSaprykin)** | Frontend & UX Developer | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ª–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | [@PetrSaprykin](https://github.com/PetrSaprykin) |
| **[–°—Ç–∞—Ä–∫–æ–≤ –†—É—Å–ª–∞–Ω –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á](https://github.com/RayStar-k)** | DevOps & QA Engineer | –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ | [@RayStar-k](https://github.com/RayStar-k) |

**–ù–∞—É—á–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:**
- **–ö—É—Ä–∞—Ç–æ—Ä –ø—Ä–∞–∫—Ç–∏–∫–∏**: –ë–∞—Ä–∏–Ω–æ–≤–∞ –ù–∞—Ç–∞–ª—å—è –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞
- **–ö—É—Ä–∞—Ç–æ—Ä—ã –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –ö–∏—Ä–µ–µ–≤–∞ –ì–∞–ª–∏–Ω–∞ –ò–≤–∞–Ω–æ–≤–Ω–∞, –ë—É–¥—ã–ª–∏–Ω–∞ –ï–≤–≥–µ–Ω–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

### üÜò –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏:**

1. **üìß Email**: [support@new-devs.ru](mailto:support@new-devs.ru)
   - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 24-48 —á–∞—Å–æ–≤
   - –î–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

2. **üêô GitHub Issues**: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/EDeev/mospoly-helper/issues)
   - –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –∏ feature requests
   - –ü—É–±–ª–∏—á–Ω–æ–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –∏ tracking

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –ø—Ä–∞–≤–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö –∫–∞–∫ —Ä–∞–±–æ—Ç–∞ –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ "–ü—Ä–æ–µ–∫—Ç–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏" –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–º –ü–æ–ª–∏—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ, 2024-2025 —É—á–µ–±–Ω—ã–π –≥–æ–¥.

---

<div align="center">
<sub>–ú–æ—Å–ü–æ–ª–∏–•–µ–ª–ø–µ—Ä ‚Äî –¥–µ–ª–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π! üéì‚ú®</sub>
<p><sub>–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –ú–æ—Å–ü–æ–ª–∏—Ç–µ—Ö–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</sub></p>
</div>
